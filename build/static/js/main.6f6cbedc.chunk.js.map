{"version":3,"sources":["utils/functions.ts","components/TimePreview.tsx","components/SeekPreview.tsx","components/VideoProgress.tsx","components/VideoControlButton.tsx","components/VolumeControl.tsx","components/SettingsControl.tsx","components/FullscreenControl.tsx","components/PlaybackControl.tsx","components/VideoClickFeedback.tsx","components/ElapsedTime.tsx","components/VideoControls.tsx","store/VideoStore.ts","components/VideoPlayer.tsx","App.tsx","theme.ts","index.tsx"],"names":["formatSecondsToTimeDuration","value","hours","Math","floor","minutes","seconds","hoursText","minutesSecondsText","toString","padStart","delayMsAsync","ms","Promise","resolve","setTimeout","observer","videoStore","React","VideoPlayerContext","Box","display","position","top","bgcolor","paddingX","borderRadius","left","seekHoverPositionPercentClamped","visibility","previewPeekIsActive","Typography","variant","color","seekHoverPositionSeconds","height","zIndex","width","seekHoverPositionPercent","style","transform","fullscreenIsActive","transformOrigin","getProgressScale","inputs","previewEnabled","useProgressStyles","makeStyles","root","alignItems","padding","thumb","boxShadow","marginTop","opacity","active","track","pointerEvents","rail","backgroundColor","progressStyleInputs","progressClasses","marginX","Slider","onMouseMove","handlePreviewSeek","onMouseLeave","cancelPreviewSeek","onMouseEnter","startPreviewSeek","onChange","handleSeek","onChangeCommitted","classes","min","step","max","durationSeconds","valueLabelDisplay","getAriaValueText","aria-label","currentPositionSeconds","useControlStyles","VideoControlButton","children","onClick","otherProps","IconButton","disableFocusRipple","disableRipple","only","useSliderStyles","theme","margin","spacing","transition","sliderStylesInputs","sliderClasses","sliderMaxWidth","sliderDisplayWidth","pointerIsHovering","handleVolumeOnHover","edge","toggleVolume","volumeLevel","volumeIsMuted","overflow","handleVolumeChange","useMenuStyles","paper","maxHeight","palette","common","white","useIconStyles","marginRight","playbackSpeeds","anchorOrigin","vertical","horizontal","listItemTypographyVariant","opacityOnStyle","opacityOffStyle","aboveControlsRef","popupState","usePopupState","popupId","selectedItemIndex","setSelectedItemIndex","clampedMinMaxAvailableContainerHeight","clampedMaxAvailableContainerHeight","clientHeight","menuStylesInput","menuClasses","iconClasses","setAnchorEl","makeOnMenuItemClick","speed","index","event","handlePlaybackSpeedChange","close","bindToggle","Menu","bindMenu","getContentAnchorEl","disablePortal","keepMounted","MenuItem","divider","ListItemText","primaryTypographyProps","primary","map","textContent","isSelected","itemOnClick","toggleFullscreen","fontSize","togglePlayback","videoIsPlaying","useFeedbackStyles","actionAnimationStart","actionRestState","videoClickAnimationDisplaying","FeedbackIconType","PlayCircleFilledIcon","PauseCircleFilledIcon","justifyContent","seekIsPending","useTextStyles","lineHeight","textClasses","paddingTop","useVideoStyles","controlsAndProgress","background","controlsAndProgressActive","controlsAndProgressIdle","cursorOn","cursor","cursorOff","setAboveControlsRef","hideControlsHandler","activateControlsHandler","onTouchMove","onTouchStart","className","userIsIdle","flexDirection","flexGrow","ref","handleVideoClick","marginBottom","handleVolumeOnHoverExit","FullscreenControl","configure","enforceActions","computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","VideoStore","videoElement","videoContainer","pendingControlHideHandler","videoWasPlayingBeforeSeek","setUserAsActive","setInitialState","handleVideoClickFlow","bind","setUserAsActiveFlow","handleKeys","key","handleSkipPercent","handleReset","handleEnd","handleSkipForward","handleSkipBackward","handleVolumeIncrease","handleVolumeDecrease","cancel","pendingHideHandle","flowResult","catch","setUserAsIdle","setVideoElement","addEventListener","updateDuration","setVideoContainer","fscreen","handleFullscreenChange","cleanUp","removeEventListener","percent","newTime","currentTime","skipAmountSeconds","updateTime","paused","ended","window","requestAnimationFrame","duration","handlePlay","handlePause","play","pause","currentTarget","getBoundingClientRect","pageX","includes","type","isMouseDown","isMouseUp","fullscreenEnabled","fullscreenElement","exitFullscreen","requestFullscreen","document","documentElement","increaseAmount","newVolume","volume","decreaseAmount","Number","isFinite","muted","playbackRate","this","makeAutoObservable","hoverTime","currentTimePercent","hoverPercent","useStyles","video","objectFit","VideoPlayer","posterUrl","manualDownloadUrl","sourceList","videoElementRef","videoContainerRef","videoStoreRef","getStore","current","border","borderColor","Provider","id","preload","poster","source","url","src","href","App","marginY","process","gutterBottom","createMuiTheme","overrides","MuiCssBaseline","scrollbarColor","main","secondary","error","red","A400","default","ReactDOM","ThemeProvider","CssBaseline","getElementById"],"mappings":"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","file":"static/js/main.6f6cbedc.chunk.js","sourcesContent":["const formatSecondsToTimeDuration = (value: number): string => {\r\n  if (value < 0 || value >= 24 * 60 * 60) return 'N/A';\r\n\r\n  const hours = Math.floor(value / 60 / 24);\r\n  const minutes = Math.floor(value / 60 % 24);\r\n  const seconds = Math.floor(value % 60);\r\n\r\n  const hoursText = hours ? `${hours}:` : '';\r\n  const minutesSecondsText = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\r\n\r\n  return `${hoursText}${minutesSecondsText}`;\r\n};\r\n\r\nconst delayMsAsync = (ms: number): Promise<number> => new Promise((resolve) => setTimeout(resolve, ms));\r\n\r\nconst delayNextFrame = (): Promise<number> => new Promise(window.requestAnimationFrame);\r\n\r\nexport {\r\n  formatSecondsToTimeDuration,\r\n  delayMsAsync,\r\n  delayNextFrame,\r\n};","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\n\r\nimport Box from '@material-ui/core/Box';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport { formatSecondsToTimeDuration } from '../utils/functions';\r\nimport { VideoPlayerContext } from './VideoPlayer';\r\n\r\n\r\nconst TimePreview: React.FC<{}> = () => {\r\n  const videoStore = React.useContext(VideoPlayerContext);\r\n  \r\n  return (\r\n    <Box \r\n      display='inline-block'\r\n      position='absolute'\r\n      top='-1.3rem'\r\n      bgcolor={'radial-gradient(#0003} transparent)'}\r\n      paddingX={2}\r\n      borderRadius={100}\r\n      left={`calc(${videoStore.seekHoverPositionPercentClamped}% - 18px)`}\r\n      visibility={videoStore.previewPeekIsActive ? 'visible' : 'hidden'}\r\n    > \r\n      <Typography\r\n        variant=\"body2\" \r\n        color=\"secondary\"\r\n      >\r\n        {formatSecondsToTimeDuration(videoStore.seekHoverPositionSeconds)}\r\n      </Typography>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default observer(TimePreview);","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\n\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport { VideoPlayerContext } from './VideoPlayer';\r\n\r\n\r\nconst SeekPreview: React.FC<{}> = () => {\r\n  const videoStore = React.useContext(VideoPlayerContext);\r\n\r\n  return (\r\n    <Box \r\n      position=\"absolute\"\r\n      height={`calc(5 / 16 * 100%)`}\r\n      left={0}\r\n      zIndex={-1}\r\n      bgcolor=\"grey.800\"\r\n      width={`${videoStore.seekHoverPositionPercent}%`}\r\n      style={{ \r\n        transform: `scaleY(${videoStore.fullscreenIsActive ? 1.4 : 1})`,\r\n        transformOrigin: 'top',\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default observer(SeekPreview);","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\n\r\nimport { makeStyles, Theme } from '@material-ui/core/styles';\r\nimport Box from '@material-ui/core/Box';\r\nimport Slider from '@material-ui/core/Slider';\r\n\r\nimport { formatSecondsToTimeDuration } from '../utils/functions';\r\nimport { VideoPlayerContext } from './VideoPlayer';\r\nimport TimePreview from './TimePreview';\r\nimport SeekPreview from './SeekPreview';\r\n\r\n\r\ntype ProgressStyleInputsType = {\r\n  previewEnabled: boolean,\r\n  fullscreenIsActive: boolean,\r\n};\r\n\r\nconst getProgressScale = (inputs: ProgressStyleInputsType): number => {\r\n  const { fullscreenIsActive, previewEnabled } = inputs;\r\n\r\n  const fullscreenScaleModifier = fullscreenIsActive ? 1.4 : 1;\r\n  const hoveredScaleModifier = previewEnabled ? 1 : 0.6;\r\n\r\n  return fullscreenScaleModifier * hoveredScaleModifier;\r\n};\r\n\r\nconst useProgressStyles = makeStyles<Theme, ProgressStyleInputsType>({\r\n  root: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    position: 'absolute',\r\n    top: 0,\r\n    padding: 0,\r\n    height: '100%',\r\n    transform: (inputs) => `scaleY(${getProgressScale(inputs)})`,\r\n    transformOrigin: 'center center',\r\n  },\r\n  thumb: {\r\n    '&:focus, &:hover, &$active': {\r\n      boxShadow: 'unset',\r\n    },\r\n    marginTop: 'unset',\r\n    transform: (inputs) => `scaleX(${getProgressScale(inputs)})`,\r\n    opacity: ({ previewEnabled }) => previewEnabled ? 1 : 0,\r\n  },\r\n  active: {},\r\n  track: {\r\n    height: 'calc(5 / 16 * 100%)',\r\n    pointerEvents: 'none',\r\n  },\r\n  rail: {\r\n    height: 'calc(5 / 16 * 100%)',\r\n    backgroundColor: 'gray',\r\n    opacity: 0.4,\r\n  },\r\n});\r\n\r\nconst VideoProgress: React.FC<{}> = () => {\r\n  const videoStore = React.useContext(VideoPlayerContext);\r\n\r\n  const progressStyleInputs: ProgressStyleInputsType = React.useMemo(() => ({\r\n    previewEnabled: videoStore.previewPeekIsActive,\r\n    fullscreenIsActive: videoStore.fullscreenIsActive,\r\n  }), [videoStore.previewPeekIsActive, videoStore.fullscreenIsActive]);\r\n\r\n  const progressClasses = useProgressStyles(progressStyleInputs);\r\n\r\n  return (\r\n    <Box \r\n      position='relative'\r\n      marginX={4}\r\n    >\r\n      <TimePreview />\r\n      \r\n      <Box\r\n        position='relative'\r\n        height='16px'\r\n        display='flex'\r\n        alignItems='center'\r\n      >\r\n        <Slider\r\n          onMouseMove={videoStore.handlePreviewSeek}\r\n          onMouseLeave={videoStore.cancelPreviewSeek}\r\n          onMouseEnter={videoStore.startPreviewSeek}\r\n          onChange={videoStore.handleSeek}\r\n          onChangeCommitted={videoStore.handleSeek}\r\n          classes={progressClasses}\r\n          min={0}\r\n          step={0.1}\r\n          max={videoStore.durationSeconds}\r\n          valueLabelDisplay=\"off\"\r\n          getAriaValueText={formatSecondsToTimeDuration}\r\n          aria-label=\"progress-slider\"\r\n          value={videoStore.currentPositionSeconds}\r\n        />\r\n\r\n        <SeekPreview />\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default observer(VideoProgress);","import * as React from 'react';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nconst useControlStyles = makeStyles({\r\n  root: {\r\n    padding: 0,\r\n    '&:hover': {\r\n      backgroundColor: 'unset',\r\n    }\r\n  }\r\n});\r\n\r\ntype VideoControlButtonPropsType = {\r\n  children: React.ReactElement,\r\n  onClick: React.EventHandler<React.SyntheticEvent>,\r\n  [otherProps: string]: any,\r\n};\r\n\r\nconst VideoControlButton: React.FC<VideoControlButtonPropsType> = ({ children, onClick, ...otherProps }) => {\r\n  const classes = useControlStyles();\r\n\r\n  return (\r\n    <IconButton\r\n      classes={classes}\r\n      disableFocusRipple \r\n      disableRipple\r\n      onClick={onClick}\r\n      color=\"secondary\"\r\n    >\r\n      {React.cloneElement(React.Children.only(children), otherProps)}\r\n    </IconButton>\r\n  );\r\n};\r\n\r\nexport default VideoControlButton;","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\n\r\nimport { makeStyles, Theme } from '@material-ui/core/styles';\r\nimport Box from '@material-ui/core/Box';\r\nimport Slider from '@material-ui/core/Slider';\r\nimport VolumeDownIcon from '@material-ui/icons/VolumeDown';\r\nimport VolumeOffIcon from '@material-ui/icons/VolumeOff';\r\nimport VolumeUpIcon from '@material-ui/icons/VolumeUp';\r\n\r\nimport VideoControlButton from './VideoControlButton';\r\nimport { VideoPlayerContext } from './VideoPlayer';\r\n\r\ntype SliderStylesInputsType = {\r\n  fullscreenIsActive: boolean,\r\n};\r\n\r\nconst useSliderStyles = makeStyles<Theme, SliderStylesInputsType>((theme) => ({\r\n  root: {\r\n    display: 'inline-block',\r\n    margin: theme.spacing(0, 4, 0, 4),\r\n  },\r\n  track: {\r\n    height: 4,\r\n  },\r\n  rail: {\r\n    height: 4,\r\n    backgroundColor: 'gray',\r\n  },\r\n  thumb: {\r\n    width: 16,\r\n    height: 16,\r\n    marginTop: -6,\r\n    '&:focus, &:hover, &$active': {\r\n      boxShadow: 'unset',\r\n    },\r\n    transform: ({ fullscreenIsActive }) => `scale(${fullscreenIsActive ? 1 : 0.75})`,\r\n    transition: 'transform .2s linear',\r\n  },\r\n}));\r\n\r\nconst VolumeControl: React.FC<{}> = () => {\r\n  const videoStore = React.useContext(VideoPlayerContext);\r\n\r\n  const sliderStylesInputs = React.useMemo(() => ({\r\n    fullscreenIsActive: videoStore.fullscreenIsActive,\r\n  }), [videoStore.fullscreenIsActive]);\r\n  const sliderClasses = useSliderStyles(sliderStylesInputs);\r\n\r\n  const sliderMaxWidth = videoStore.fullscreenIsActive ? '100px' : '76px';\r\n  const sliderDisplayWidth = videoStore.pointerIsHovering ? sliderMaxWidth : '0px';\r\n\r\n  return (\r\n    <Box \r\n      display='flex'\r\n      alignItems='center'\r\n      marginX={2}\r\n      onMouseEnter={videoStore.handleVolumeOnHover}\r\n    >\r\n      <VideoControlButton \r\n        edge=\"end\" \r\n        aria-label=\"volume\"\r\n        onClick={videoStore.toggleVolume}\r\n      >\r\n        {((videoStore.volumeLevel <= 0) || videoStore.volumeIsMuted) \r\n          ? <VolumeOffIcon />\r\n          : (videoStore.volumeLevel >= 50) \r\n            ? <VolumeUpIcon />\r\n            : <VolumeDownIcon />\r\n        }\r\n      </VideoControlButton>\r\n\r\n      <Box \r\n        display='flex'\r\n        alignItems='center'\r\n        overflow='hidden'\r\n        width={sliderDisplayWidth} \r\n        style={{ transition: 'width .2s linear' }}\r\n      >\r\n        <Slider\r\n          classes={sliderClasses}\r\n          min={0}\r\n          step={1}\r\n          max={100}\r\n          color=\"secondary\"\r\n          onChange={videoStore.handleVolumeChange}\r\n          valueLabelDisplay=\"off\"\r\n          aria-label=\"volume-slider\"\r\n          value={videoStore.volumeIsMuted ? 0 : videoStore.volumeLevel} \r\n        />\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default observer(VolumeControl);","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport {\r\n  usePopupState,\r\n  bindToggle,\r\n  bindMenu,\r\n} from 'material-ui-popup-state/hooks'\r\nimport { makeStyles, Theme } from '@material-ui/core/styles';\r\n\r\nimport Box from '@material-ui/core/Box';\r\nimport Menu from '@material-ui/core/Menu'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\n\r\nimport VideoControlButton from './VideoControlButton';\r\nimport { VideoPlayerContext } from './VideoPlayer';\r\n\r\ntype MenuStylesInputsType = {\r\n  maxHeight: number,\r\n};\r\n\r\nconst useMenuStyles = makeStyles<Theme, MenuStylesInputsType>(theme => ({\r\n  paper: {\r\n    maxHeight: ({ maxHeight }) => maxHeight,\r\n    backgroundColor: '#000d',\r\n    '& .MuiListItemIcon-root, & .MuiListItemText-primary': {\r\n      color: theme.palette.common.white,\r\n    },\r\n  },\r\n}));\r\n\r\nconst useIconStyles = makeStyles(theme => ({\r\n  root: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nconst playbackSpeeds = [0.25, 0.5, 0.75, 1, 1.25, 1.5, 1.75, 2];\r\nconst anchorOrigin = { vertical: 'bottom' as 'bottom', horizontal: 'right' as 'right' };\r\nconst transformOrigin = { vertical: 'bottom' as 'bottom', horizontal: 'right' as 'right' };\r\nconst listItemTypographyVariant = { variant: 'body2' as 'body2' };\r\nconst opacityOnStyle = { opacity: 1 };\r\nconst opacityOffStyle = { opacity: 0 };\r\n\r\ntype SettingsControlPropsType = {\r\n  aboveControlsRef: HTMLDivElement | null,\r\n};\r\n\r\nconst SettingsControl: React.FC<SettingsControlPropsType> = ({ aboveControlsRef = null }) => {\r\n  const videoStore = React.useContext(VideoPlayerContext);\r\n  const popupState = usePopupState({ variant: 'popover', popupId: 'settingsMenu' });\r\n  const [selectedItemIndex, setSelectedItemIndex] = React.useState(3);\r\n  \r\n  let clampedMinMaxAvailableContainerHeight = 500;\r\n  if (aboveControlsRef) {\r\n    const clampedMaxAvailableContainerHeight = Math.min(aboveControlsRef.clientHeight - 10, 500);\r\n    clampedMinMaxAvailableContainerHeight = Math.max(50, clampedMaxAvailableContainerHeight);\r\n  }\r\n\r\n  const menuStylesInput = React.useMemo(() => ({\r\n    maxHeight: clampedMinMaxAvailableContainerHeight\r\n  }), [clampedMinMaxAvailableContainerHeight]);\r\n\r\n  const menuClasses = useMenuStyles(menuStylesInput);\r\n  const iconClasses = useIconStyles();\r\n\r\n  React.useEffect(() => {\r\n    if (!aboveControlsRef) return;\r\n\r\n    popupState.setAnchorEl(aboveControlsRef);\r\n  }, [popupState, aboveControlsRef]);\r\n\r\n  const makeOnMenuItemClick = React.useCallback((speed, index) => (event: React.SyntheticEvent) => {\r\n    setSelectedItemIndex(index);\r\n    videoStore.handlePlaybackSpeedChange(speed);\r\n    popupState.close();\r\n  }, [popupState, videoStore, setSelectedItemIndex]);\r\n\r\n  return (\r\n    <Box>\r\n      <VideoControlButton \r\n        edge=\"end\"\r\n        aria-label=\"settings\" \r\n        {...bindToggle(popupState)}\r\n      >\r\n        <SettingsIcon />\r\n      </VideoControlButton>\r\n\r\n      <Menu \r\n        {...bindMenu(popupState)}\r\n        variant=\"menu\"\r\n        getContentAnchorEl={null}\r\n        anchorOrigin={anchorOrigin}\r\n        transformOrigin={transformOrigin}\r\n        classes={menuClasses}\r\n        disablePortal={true}\r\n        keepMounted={true}\r\n      >\r\n        <MenuItem \r\n          divider={true} \r\n        >\r\n          <ListItemText \r\n            primaryTypographyProps={listItemTypographyVariant} \r\n            primary=\"Playback Speed\"\r\n          />\r\n        </MenuItem>\r\n\r\n        { /* This loop is static, generated by a constant list so we can use hooks inside \r\n          since the order and number of hooks is the same every time */\r\n          playbackSpeeds.map((speed, index) => {\r\n            const textContent = (speed === 1) ? 'Normal' : speed.toString().padStart(3, ' ');\r\n            const isSelected = (selectedItemIndex === index);\r\n            // eslint-disable-next-line react-hooks/exhaustive-deps, react-hooks/rules-of-hooks\r\n            const itemOnClick = React.useCallback(makeOnMenuItemClick(speed, index), [makeOnMenuItemClick]);\r\n\r\n            return (\r\n              <MenuItem\r\n                key={textContent}\r\n                onClick={itemOnClick}\r\n              >\r\n                <CheckIcon\r\n                  color=\"secondary\" \r\n                  classes={iconClasses} \r\n                  style={isSelected ? opacityOnStyle : opacityOffStyle }\r\n                />\r\n                <ListItemText\r\n                  primaryTypographyProps={listItemTypographyVariant} \r\n                  primary={textContent} \r\n                />\r\n              </MenuItem>\r\n            );\r\n          })\r\n        }\r\n      </Menu>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default observer(SettingsControl);","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\n\r\nimport FullscreenIcon from '@material-ui/icons/Fullscreen';\r\nimport FullscreenExitIcon from '@material-ui/icons/FullscreenExit';\r\n\r\nimport VideoControlButton from './VideoControlButton';\r\nimport { VideoPlayerContext } from './VideoPlayer';\r\n\r\n\r\nconst FullScreenControl: React.FC<{}> = () => {\r\n  const videoStore = React.useContext(VideoPlayerContext);\r\n\r\n  return (\r\n    <VideoControlButton \r\n      onClick={videoStore.toggleFullscreen}\r\n      aria-label=\"full-screen\"\r\n    >\r\n      {videoStore.fullscreenIsActive \r\n        ? <FullscreenExitIcon fontSize=\"large\"/> \r\n        : <FullscreenIcon fontSize=\"large\"/>\r\n      }\r\n    </VideoControlButton>\r\n  );\r\n};\r\n\r\nexport default observer(FullScreenControl);","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\n\r\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\r\nimport PauseIcon from '@material-ui/icons/Pause';\r\n\r\nimport VideoControlButton from './VideoControlButton';\r\nimport { VideoPlayerContext } from './VideoPlayer';\r\n\r\n\r\nconst PlaybackControl: React.FC<{}> = () => {\r\n  const videoStore = React.useContext(VideoPlayerContext);\r\n\r\n  return (\r\n    <VideoControlButton \r\n      onClick={videoStore.togglePlayback} \r\n      edge=\"end\" \r\n      aria-label=\"play or pause\"\r\n    >\r\n      {(videoStore.videoIsPlaying)\r\n        ? <PauseIcon fontSize=\"large\"/> \r\n        : <PlayArrowIcon fontSize=\"large\"/>}\r\n    </VideoControlButton>\r\n  );\r\n};\r\n\r\nexport default observer(PlaybackControl);","import * as React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { observer } from 'mobx-react';\r\n\r\nimport Box from '@material-ui/core/Box';\r\nimport PlayCircleFilledIcon from '@material-ui/icons/PlayCircleFilled';\r\nimport PauseCircleFilledIcon from '@material-ui/icons/PauseCircleFilled';\r\n\r\nimport { VideoPlayerContext } from './VideoPlayer';\r\n\r\n\r\nconst useFeedbackStyles = makeStyles({\r\n  actionAnimationStart: {\r\n    fontSize: \"4rem\",\r\n    opacity: 0.5,\r\n  },\r\n  actionRestState: {\r\n    transition: 'all 0.5s ease-out',\r\n    fontSize: \"8rem\",\r\n    opacity: 0,\r\n  },\r\n});\r\n\r\nconst VideoClickFeedback: React.FC<{}> = () => {\r\n  const videoStore = React.useContext(VideoPlayerContext);\r\n  const classes = useFeedbackStyles();\r\n\r\n  const iconClasses = React.useMemo(() => ({ \r\n    root: videoStore.videoClickAnimationDisplaying \r\n      ? classes.actionAnimationStart \r\n      : classes.actionRestState \r\n  }), [videoStore.videoClickAnimationDisplaying, classes]);\r\n\r\n  const FeedbackIconType = (videoStore.videoIsPlaying)\r\n    ? PlayCircleFilledIcon \r\n    : PauseCircleFilledIcon;\r\n\r\n  return (\r\n    <Box \r\n      display='flex'\r\n      alignItems='center'\r\n      justifyContent='center'\r\n      height='100%'\r\n      width='100%'\r\n      position='absolute'\r\n      zIndex={1}\r\n      top={0}\r\n      left={0}\r\n      bgcolor={videoStore.seekIsPending ? '#000a' : 'initial'}\r\n    >\r\n      <FeedbackIconType\r\n        classes={iconClasses}\r\n        color=\"secondary\"\r\n      />\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default observer(VideoClickFeedback);","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport { formatSecondsToTimeDuration } from '../utils/functions';\r\nimport { VideoPlayerContext } from './VideoPlayer';\r\n\r\n\r\nconst useTextStyles = makeStyles({\r\n  root: {\r\n    lineHeight: '100%',\r\n  },\r\n});\r\n\r\nconst ElapsedTime: React.FC<{}> = () => {\r\n  const videoStore = React.useContext(VideoPlayerContext);\r\n  const textClasses = useTextStyles();\r\n\r\n  return (\r\n    <Box paddingTop={1} display=\"flex\" alignItems=\"center\">\r\n      <Typography\r\n        classes={textClasses}\r\n        variant=\"body2\" \r\n        color=\"secondary\"\r\n      >\r\n        {`${formatSecondsToTimeDuration(videoStore.currentPositionSeconds)} \r\n          / ${formatSecondsToTimeDuration(videoStore.durationSeconds)}`}\r\n      </Typography>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default observer(ElapsedTime);","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport VideoProgress from './VideoProgress';\r\nimport VolumeControl from './VolumeControl';\r\nimport SettingsControl from './SettingsControl';\r\nimport FullscreenControl from './FullscreenControl';\r\nimport PlaybackControl from './PlaybackControl';\r\nimport VideoClickFeedback from './VideoClickFeedback';\r\nimport ElapsedTime from './ElapsedTime';\r\nimport { VideoPlayerContext } from './VideoPlayer';\r\n\r\n\r\nconst useVideoStyles = makeStyles({\r\n  controlsAndProgress: {\r\n    background: 'linear-gradient(0deg, #000a, transparent)',\r\n  },\r\n  controlsAndProgressActive: {\r\n    opacity: 1,\r\n  },\r\n  controlsAndProgressIdle: {\r\n    transition: 'all 0.2s linear',\r\n    opacity: 0,\r\n  },\r\n  cursorOn: {\r\n    cursor: 'auto',\r\n  },\r\n  cursorOff: {\r\n    transition: 'all 0.2s linear',\r\n    cursor: 'none',\r\n  },\r\n});\r\n\r\nconst VideoControls: React.FC<{}> = () => {\r\n  const classes = useVideoStyles();\r\n  const videoStore = React.useContext(VideoPlayerContext);\r\n  const [aboveControlsRef, setAboveControlsRef] = React.useState<HTMLDivElement | null>(null);\r\n\r\n  return (\r\n    <Box \r\n      onMouseLeave={videoStore.hideControlsHandler}\r\n      onMouseEnter={videoStore.activateControlsHandler}\r\n      onClick={videoStore.activateControlsHandler}\r\n      onMouseMove={videoStore.activateControlsHandler}\r\n      onTouchMove={videoStore.activateControlsHandler}\r\n      onTouchStart={videoStore.activateControlsHandler}\r\n      className={videoStore.userIsIdle ? classes.cursorOff : classes.cursorOn}\r\n      height='100%'\r\n      width='100%'\r\n      position='absolute'\r\n      zIndex={1}\r\n      top={0}\r\n      left={0}\r\n    >\r\n      <VideoClickFeedback />\r\n\r\n      <Box \r\n        className={videoStore.userIsIdle \r\n          ? classes.controlsAndProgressIdle \r\n          : classes.controlsAndProgressActive}\r\n        display='flex'\r\n        flexDirection='column'\r\n        width='100%'\r\n        height='100%'\r\n        position='relative'\r\n        zIndex={2}\r\n      >\r\n        <Box \r\n          flexGrow={1}\r\n          // @ts-expect-error\r\n          ref={setAboveControlsRef}\r\n          onClick={videoStore.handleVideoClick}\r\n        />\r\n\r\n        <Box className={classes.controlsAndProgress}>\r\n          <VideoProgress />\r\n\r\n          <Box \r\n            display='flex'\r\n            alignItems='center'\r\n            justifyContent='space-between'\r\n            marginBottom={2}\r\n            paddingX={5}\r\n          >\r\n            <Box \r\n              display='flex'\r\n              alignItems='center'\r\n              onMouseLeave={videoStore.handleVolumeOnHoverExit}\r\n            >\r\n              <PlaybackControl />\r\n              <VolumeControl />\r\n              <ElapsedTime />\r\n            </Box>\r\n\r\n            <Box\r\n              display='flex'\r\n              alignItems='center'\r\n            >\r\n              <SettingsControl aboveControlsRef={aboveControlsRef} />\r\n              <FullscreenControl />\r\n            </Box>\r\n          </Box>\r\n        </Box>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default observer(VideoControls);","import { makeAutoObservable, configure, flowResult } from 'mobx';\r\nimport fscreen from 'fscreen';\r\nimport { MouseEventHandler } from 'react';\r\nimport { CancellablePromise } from 'mobx/dist/api/flow';\r\n\r\nimport { delayMsAsync, delayNextFrame } from '../utils/functions';\r\n\r\nconfigure({\r\n  enforceActions: \"always\",\r\n  computedRequiresReaction: true,\r\n  reactionRequiresObservable: true,\r\n  observableRequiresReaction: true,\r\n  disableErrorBoundaries: true\r\n});\r\n\r\nclass VideoStore {\r\n  videoElement: HTMLVideoElement | null = null;\r\n  videoContainer: HTMLDivElement | null = null;\r\n  pendingControlHideHandler: CancellablePromise<void> | null = null;\r\n  videoIsPlaying = false;\r\n  volumeLevel = 1;\r\n  volumeIsMuted = false;\r\n  currentPositionSeconds = 0;\r\n  durationSeconds = 0;\r\n  fullscreenIsActive = false;\r\n  videoClickAnimationDisplaying = false;\r\n  userIsIdle = false;\r\n  seekIsPending = false;\r\n  videoWasPlayingBeforeSeek = false;\r\n  seekHoverPositionPercent = 0;\r\n  previewPeekIsActive = false;\r\n  pointerIsHovering = false;\r\n  handleVideoClick = function*() { (yield Promise.resolve(0)) as void; };\r\n  setUserAsActive = function*() { (yield Promise.resolve(0)) as void; };\r\n\r\n  constructor() {\r\n    this.setInitialState();\r\n\r\n    makeAutoObservable(this, {\r\n      videoElement: false,\r\n      videoContainer: false,\r\n      setVideoElement: false,\r\n      cleanUp: false,\r\n      videoWasPlayingBeforeSeek: false,\r\n      handleKeys: false,\r\n      pendingControlHideHandler: false,\r\n    });\r\n\r\n    document.addEventListener('keydown', this.handleKeys);\r\n  }\r\n\r\n  setInitialState = (): void => {\r\n    this.videoIsPlaying = false;\r\n    this.volumeLevel = 1;\r\n    this.volumeIsMuted = false;\r\n    this.currentPositionSeconds = 0;\r\n    this.durationSeconds = 0;\r\n    this.fullscreenIsActive = false;\r\n    this.videoClickAnimationDisplaying = false;\r\n    this.userIsIdle = false;\r\n    this.seekIsPending = false;\r\n    this.videoWasPlayingBeforeSeek = false;\r\n    this.seekHoverPositionPercent = 0;\r\n    this.previewPeekIsActive = false;\r\n    this.pointerIsHovering = false;\r\n    this.handleVideoClick = this.handleVideoClickFlow.bind(this);\r\n    this.setUserAsActive = this.setUserAsActiveFlow.bind(this);\r\n    this.pendingControlHideHandler = null;\r\n  };\r\n\r\n  handleKeys = (event: KeyboardEvent): void => {\r\n    this.activateControlsHandler();\r\n\r\n    switch (event.key) {\r\n      // Playback control\r\n      case 'k':\r\n      case ' ': return this.togglePlayback();\r\n\r\n      // Skip to segment\r\n      case '1': return this.handleSkipPercent(10);\r\n      case '2': return this.handleSkipPercent(20);\r\n      case '3': return this.handleSkipPercent(30);\r\n      case '4': return this.handleSkipPercent(40);\r\n      case '5': return this.handleSkipPercent(50);\r\n      case '6': return this.handleSkipPercent(60);\r\n      case '7': return this.handleSkipPercent(70);\r\n      case '8': return this.handleSkipPercent(80);\r\n      case '9': return this.handleSkipPercent(90);\r\n\r\n      // Skip control\r\n      case '0':\r\n      case 'Home': return this.handleReset();\r\n      \r\n      case 'End': return this.handleEnd();\r\n\r\n      case 'ArrowRight': return this.handleSkipForward(5);\r\n      case 'l': return this.handleSkipForward(10);\r\n\r\n      case 'ArrowLeft': return this.handleSkipBackward(5);\r\n      case 'j': return this.handleSkipBackward(10);\r\n\r\n      // Volume control\r\n      case 'ArrowUp': return this.handleVolumeIncrease();\r\n      \r\n      case 'ArrowDown': return this.handleVolumeDecrease();\r\n\r\n      case 'm': return this.toggleVolume();\r\n      \r\n      // Full-screen control\r\n      case 'f': return this.toggleFullscreen();\r\n    }\r\n  };\r\n\r\n  activateControlsHandler = () => {\r\n    // Cancel any existing scheduled hiding of video controls \r\n    this.pendingControlHideHandler?.cancel();\r\n\r\n    const pendingHideHandle = flowResult(this.setUserAsActive());\r\n    pendingHideHandle.catch(() => null);\r\n    this.pendingControlHideHandler = pendingHideHandle;\r\n  };\r\n  \r\n  hideControlsHandler = () => {\r\n    // Cancel any existing scheduled hiding of video controls\r\n    this.pendingControlHideHandler?.cancel();\r\n    this.pendingControlHideHandler = null;\r\n\r\n    this.setUserAsIdle();\r\n  };\r\n\r\n  setVideoElement = (videoElement: HTMLVideoElement): void => {\r\n    this.videoElement = videoElement;\r\n    if (videoElement) {\r\n      videoElement.addEventListener('loadedmetadata', this.updateDuration);\r\n      videoElement.addEventListener('ended', this.handleEnd);\r\n    }\r\n  };\r\n\r\n  setVideoContainer = (videoContainer: HTMLDivElement): void => {\r\n    this.videoContainer = videoContainer;\r\n    fscreen.addEventListener('fullscreenchange', this.handleFullscreenChange);\r\n  };\r\n  \r\n  cleanUp = (): void => {\r\n    this.videoElement?.removeEventListener('loadedmetadata', this.updateDuration);\r\n    this.videoElement?.removeEventListener('ended', this.handleEnd);\r\n    this.videoContainer?.removeEventListener('fullscreenchange', this.handleFullscreenChange);\r\n\r\n    this.videoElement = null;\r\n    this.videoContainer = null;\r\n  };\r\n\r\n  setUserAsIdle = (): void => {\r\n    if (this.videoIsPlaying) {\r\n      this.userIsIdle = true;\r\n    }\r\n  };\r\n\r\n  handleReset = (): void => {\r\n    this.currentPositionSeconds = 0;\r\n    this.videoIsPlaying = false;\r\n  };\r\n  \r\n  handleEnd = (): void => {\r\n    this.currentPositionSeconds = this.durationSeconds;\r\n    this.videoIsPlaying = false;\r\n  };\r\n\r\n  handleSkipPercent = (percent: number = 10): void => {\r\n    if (!this.videoElement || percent < 1 || percent > 99) return;\r\n\r\n    const newTime = percent * this.durationSeconds / 100;\r\n    this.currentPositionSeconds = newTime;\r\n    this.videoElement.currentTime = newTime;\r\n  };\r\n\r\n  handleSkipForward = (skipAmountSeconds: number = 5): void => {\r\n    if (!this.videoElement) return;\r\n\r\n    const newTime = this.currentPositionSeconds + skipAmountSeconds;\r\n    if (newTime > this.durationSeconds) {\r\n      return this.handleEnd();\r\n    }\r\n\r\n    this.currentPositionSeconds = newTime;\r\n    this.videoElement.currentTime = newTime;\r\n  };\r\n\r\n  handleSkipBackward = (skipAmountSeconds: number = 5): void => {\r\n    if (!this.videoElement) return;\r\n\r\n    const newTime = this.currentPositionSeconds - skipAmountSeconds;\r\n    if (newTime < 0) {\r\n      return this.handleReset();\r\n    }\r\n\r\n    this.currentPositionSeconds = newTime;\r\n    this.videoElement.currentTime = newTime;\r\n  };\r\n\r\n  updateTime = (): void => {\r\n    if (!this.videoElement) return;\r\n\r\n    // In some mobile browsers, when loadedmetadata is raised, if it is raised at all,\r\n    // the duration may not have the correct value, or even any value at all so we\r\n    // check again here\r\n    if (!this.durationSeconds) this.updateDuration();\r\n\r\n    this.currentPositionSeconds = this.videoElement.currentTime;\r\n\r\n    // While the video keeps playing we update the progress bar once for every rendered frame\r\n    if (!this.videoElement.paused && !this.videoElement.ended) {\r\n      window.requestAnimationFrame(this.updateTime);\r\n    }\r\n  };\r\n\r\n  updateDuration = (): void => {\r\n    if (!this.videoElement) return;\r\n\r\n    this.durationSeconds = Math.floor(this.videoElement.duration);\r\n  };\r\n\r\n  togglePlayback = (): void => {\r\n    if (!this.videoElement) return;\r\n\r\n    if (this.videoElement.paused || this.videoElement.ended) {\r\n      this.handlePlay();\r\n    } else {\r\n      this.handlePause();\r\n    }\r\n  };\r\n\r\n  handlePlay = (): void => {\r\n    if (!this.videoElement) return;\r\n\r\n    if (this.videoElement.paused || this.videoElement.ended) {\r\n      this.videoElement.play();\r\n      this.videoIsPlaying = true;\r\n      this.updateTime();\r\n    }\r\n  };\r\n\r\n  handlePause = (): void => {\r\n    if (!this.videoElement) return;\r\n\r\n    if (!this.videoElement.paused && !this.videoElement.ended) {\r\n      this.videoElement.pause();\r\n      this.videoIsPlaying = false;\r\n    }\r\n  };\r\n\r\n  handlePreviewSeek: MouseEventHandler = (event) => {\r\n    const targetElement = event.currentTarget;\r\n    const { width, left } = targetElement.getBoundingClientRect();\r\n\r\n    if (!this.videoContainer || this.seekIsPending) return;\r\n    this.seekHoverPositionPercent = Math.max((event.pageX - left) * 100 / width, 0);\r\n  };\r\n\r\n  get seekHoverPositionSeconds(): number {\r\n    const hoverTime = this.seekHoverPositionPercent * this.durationSeconds / 100;\r\n    return this.seekIsPending ? this.currentPositionSeconds : hoverTime;\r\n  }\r\n\r\n  get seekHoverPositionPercentClamped(): number {\r\n    const currentTimePercent = this.currentPositionSeconds * 100 / this.durationSeconds;\r\n    const hoverPercent = this.seekIsPending ? currentTimePercent : this.seekHoverPositionPercent;\r\n    return Math.max(5, Math.min(hoverPercent, 95));\r\n  }\r\n\r\n  startPreviewSeek: MouseEventHandler = (event): void => {\r\n    this.handlePreviewSeek(event);\r\n    this.previewPeekIsActive = true;\r\n  };\r\n\r\n  cancelPreviewSeek: MouseEventHandler = (event): void => {\r\n    this.seekHoverPositionPercent = 0;\r\n    this.previewPeekIsActive = false;\r\n  };\r\n\r\n  handleSeek = (event: React.ChangeEvent<{}>, newTime: number | number[]): void => {\r\n    if (typeof newTime !== 'number') return;\r\n    if (!this.videoElement || !['mousedown', 'mouseup', 'mousemove'].includes(event.type)) return;\r\n\r\n    const isMouseDown = (event.type === 'mousedown');\r\n    const isMouseUp = (event.type === 'mouseup');\r\n\r\n    if (isMouseDown) {\r\n      if (!this.videoElement.paused && !this.videoElement.ended) {\r\n        this.videoElement.pause();\r\n        this.videoIsPlaying = false;\r\n        this.videoWasPlayingBeforeSeek = true;\r\n      } else {\r\n        this.videoWasPlayingBeforeSeek = false;\r\n      }\r\n      this.seekIsPending = true;\r\n    } else if (isMouseUp) {\r\n      if (this.videoWasPlayingBeforeSeek) {\r\n        this.videoElement.play();\r\n        this.videoIsPlaying = true;\r\n        this.updateTime();\r\n      }\r\n      this.seekIsPending = false;\r\n    }\r\n\r\n    // Update position on mouse down, up and move events\r\n    this.videoElement.currentTime = newTime;\r\n    this.currentPositionSeconds = newTime;\r\n  };\r\n\r\n  toggleFullscreen = (): void => {\r\n    if (fscreen.fullscreenEnabled && this.videoContainer) {\r\n      if (this.fullscreenIsActive && fscreen.fullscreenElement) {\r\n        fscreen.exitFullscreen();\r\n      } else {\r\n        fscreen.requestFullscreen(this.videoContainer);\r\n      }\r\n    }\r\n  };\r\n\r\n  handleFullscreenChange = (): void => {\r\n    if (fscreen.fullscreenEnabled && this.videoContainer) {\r\n      if (fscreen.fullscreenElement) {\r\n        this.fullscreenIsActive = true;\r\n        document.documentElement.style.fontSize = \"150%\";\r\n      } else {\r\n        this.fullscreenIsActive = false;\r\n        document.documentElement.style.fontSize = \"100%\";\r\n      }\r\n    }\r\n  };\r\n\r\n  handleVolumeIncrease = (increaseAmount: number = 5): void => {\r\n    if (!this.videoElement) return;\r\n\r\n    let newVolume = this.volumeLevel + increaseAmount;\r\n    if (newVolume > 100) {\r\n      newVolume = 100;\r\n    }\r\n    \r\n    this.volumeLevel = newVolume;\r\n    this.videoElement.volume = newVolume / 100;\r\n  };\r\n\r\n  handleVolumeDecrease = (decreaseAmount: number = 5): void => {\r\n    if (!this.videoElement) return;\r\n\r\n    let newVolume = this.volumeLevel - decreaseAmount;\r\n    if (newVolume < 0) {\r\n      newVolume = 0;\r\n    }\r\n\r\n    this.volumeLevel = newVolume;\r\n    this.videoElement.volume = newVolume / 100;\r\n  };\r\n\r\n  handleVolumeChange = (event: React.ChangeEvent<{}>, newVolume: number | number[]): void => {\r\n    if (typeof newVolume !== 'number') return;\r\n    if (!this.videoElement || newVolume < 0 || newVolume > 100 || !Number.isFinite(newVolume)) return;\r\n\r\n    this.volumeLevel = newVolume;\r\n    this.videoElement.volume = newVolume / 100;\r\n  };\r\n\r\n  toggleVolume = (): void => {\r\n    if (!this.videoElement) return;\r\n    \r\n    this.volumeIsMuted = !this.volumeIsMuted;\r\n    this.videoElement.muted = this.volumeIsMuted;\r\n  };\r\n \r\n  handlePlaybackSpeedChange = (speed: number): void => {\r\n    if (!this.videoElement || speed < 0 || speed > 2 || !Number.isFinite(speed)) return;\r\n    \r\n    this.videoElement.playbackRate = speed;\r\n  };\r\n\r\n  handleVolumeOnHover = (): void => {\r\n    this.pointerIsHovering = true;\r\n  }\r\n\r\n  handleVolumeOnHoverExit = (): void => {\r\n    this.pointerIsHovering = false;\r\n  }\r\n\r\n  *handleVideoClickFlow(): Generator<Promise<number>, void, void> {\r\n    this.togglePlayback();\r\n    this.videoClickAnimationDisplaying = true;\r\n    \r\n    yield delayNextFrame();\r\n    this.videoClickAnimationDisplaying = false;\r\n  };\r\n\r\n  *setUserAsActiveFlow(): Generator<Promise<number>, void, void> {\r\n    this.userIsIdle = false;\r\n\r\n    yield delayMsAsync(4000);\r\n    this.setUserAsIdle();\r\n  };\r\n}\r\n\r\nexport default VideoStore;","import * as React from 'react';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport VideoControls from './VideoControls';\r\nimport VideoStore from '../store/VideoStore';\r\n\r\nconst useStyles = makeStyles({\r\n  video: {\r\n    display: 'block',\r\n    objectFit: 'contain',\r\n    height: '100%',\r\n    width: '100%',\r\n  },\r\n});\r\n\r\nexport const VideoPlayerContext = React.createContext<VideoStore>(null!);\r\n\r\ntype VideoSourceType = {\r\n  url: string,\r\n  type: string,\r\n};\r\n\r\ntype VideoPlayerPropsType = {\r\n  posterUrl: string,\r\n  manualDownloadUrl: string,\r\n  sourceList: VideoSourceType[],\r\n}\r\n\r\nconst VideoPlayer: React.FC<VideoPlayerPropsType> = ({\r\n  posterUrl = '',\r\n  manualDownloadUrl = '',\r\n  sourceList = [],\r\n}) => {\r\n  const classes = useStyles();\r\n  const videoElementRef = React.useRef<HTMLVideoElement>(null!);\r\n  const videoContainerRef = React.useRef<HTMLDivElement>(null!);\r\n  const videoStoreRef = React.useRef<VideoStore | null>(null);\r\n\r\n  // Lazy initialization of a single videoStore instance per mounted component\r\n  const getStore = React.useCallback(() => {\r\n    if (!videoStoreRef.current) {\r\n      videoStoreRef.current = new VideoStore();\r\n    }\r\n\r\n    return videoStoreRef.current;\r\n  }, [videoStoreRef]);\r\n  \r\n  // Assign component refs required by the video store after rendering & DOM insertion\r\n  React.useEffect(() => {\r\n    const videoStore = getStore();\r\n\r\n    if (videoElementRef.current) {\r\n      videoStore.setVideoElement(videoElementRef.current);\r\n    }\r\n    \r\n    if (videoContainerRef.current) {\r\n      videoStore.setVideoContainer(videoContainerRef.current);\r\n    }\r\n    \r\n    return videoStore.cleanUp;\r\n  }, [getStore]);\r\n  \r\n  // Reset store state if the video component props change\r\n  React.useEffect(() => {\r\n    const videoStore = getStore();\r\n    videoStore.setInitialState();\r\n  });\r\n\r\n  return (\r\n    <Box\r\n      position='relative'\r\n      border={2}\r\n      borderColor='grey.700'\r\n      // @ts-expect-error\r\n      ref={videoContainerRef}\r\n    >\r\n      <VideoPlayerContext.Provider value={getStore()} >\r\n        <video\r\n          id=\"video\"\r\n          ref={videoElementRef}\r\n          className={classes.video}\r\n          preload=\"metadata\"\r\n          poster={posterUrl}\r\n        >\r\n          {sourceList.map(source => {\r\n            const { url, type } = source;\r\n            return (\r\n              <source key={url} src={url} type={type} />\r\n            );\r\n          })}\r\n\r\n          <a href={manualDownloadUrl}>Download Video</a>\r\n        </video>\r\n\r\n        <VideoControls />\r\n      </VideoPlayerContext.Provider>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default VideoPlayer;","import * as React from 'react';\n\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\n\nimport VideoPlayer from './components/VideoPlayer';\n\n\nconst App: React.FC<{}> = () => (\n  <Box display=\"flex\" justifyContent=\"center\">\n    <Box height={480} marginY={16} marginX=\"auto\">\n      <VideoPlayer\n        posterUrl={process.env.PUBLIC_URL + \"/preview/video.jpg\"}\n        manualDownloadUrl={process.env.PUBLIC_URL + \"/video/video.mp4\"}\n        sourceList={[{\n            url: process.env.PUBLIC_URL + \"/video/video.mp4\",\n            type: \"video/mp4\",\n          }\n        ]}\n      />\n\n      <Box display=\"flex\" justifyContent=\"center\" marginTop={2}>\n        <Typography variant=\"h4\" gutterBottom>\n          Big Buck Bunny\n        </Typography>\n      </Box>\n    </Box>\n  </Box>\n);\n\nexport default App;\n","import { red } from '@material-ui/core/colors';\r\n// https://github.com/mui-org/material-ui/issues/13394 this suppresses a Strict Mode warning\r\nimport { unstable_createMuiStrictModeTheme as createMuiTheme } from '@material-ui/core/styles';\r\n\r\n// A custom theme for this app\r\nconst theme = createMuiTheme({\r\n  overrides: {\r\n    MuiCssBaseline: {\r\n      '@global': {\r\n        /* The emerging W3C standard that is currently Firefox-only */\r\n        '*': {\r\n          scrollbarColor: '#424242 #8e8e8e',\r\n        },\r\n        /* Works on Chrome/Edge/Safari */\r\n        '*::-webkit-scrollbar': {\r\n          width: 10,\r\n        },\r\n        '*::-webkit-scrollbar-track': {\r\n          background: '#424242',\r\n        },\r\n        '*::-webkit-scrollbar-thumb': {\r\n          backgroundColor: '#8e8e8e',\r\n          borderRadius: 4,\r\n        }\r\n      }\r\n    }\r\n  },\r\n  spacing: 4,\r\n  palette: {\r\n    primary: {\r\n      main: '#ff5722',\r\n    },\r\n    secondary: {\r\n      main: '#ffffff',\r\n    },\r\n    error: {\r\n      main: red.A400,\r\n    },\r\n    background: {\r\n      default: '#ccbfa0',\r\n    },\r\n  },\r\n});\r\n\r\nexport default theme;","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport App from './App';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport theme from './theme';\n\nReactDOM.render(\n  <React.StrictMode>\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <App />\n    </ThemeProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}